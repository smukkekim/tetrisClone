{"version":3,"sources":["keyboardListener.js","index.js"],"names":["KeyboardListener","context","document","handlers","Object","create","subscribe","triggerKey","handler","keys","Array","isArray","forEach","key","prototype","hasOwnProperty","call","push","handleKey","evt","addEventListener","addListener","dir","LEFT","RIGHT","keyHandler","rotatePiece","movePieceLeft","movePieceRight","dropPiece","console","log"],"mappings":";;ACAA;;;;AAEA,IAAMsB,GAAG,GAAGlB,MAAM,CAACC,MAAP,CAAc,IAAd,CAAZ;AACAiB,ADHe,GCGZ,CAACC,IAAJ,CDHwBvB,ECGb,CAAC,CAAZ,YDHe,GAA8C;ACI7DsB,ADJ6D,GCI1D,CAACE,EDJqCvB,GCIzC,GAAY,CAAZ,ADJ6D,uEAAVC,QAAU;ACM7D,ADLE,ICKIuB,EDLEtB,QCKQ,ADLA,GCKG,ADLAC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAjB,aCKF;AACAoB,UAAU,CAACJ,WAAX,CAAuB,SAAvB,EAAkCK,WAAlC;AACAD,ADLE,MAAMnB,ICKE,CAACe,IDLM,GAAG,ICKpB,CAAuB,IDLff,OCKR,EAAoCqB,ADLhB,CAACpB,UAAD,ECKpB,ADLiCC,OAAb,EAAyB;ACM7CiB,ADLI,QAAMhB,ECKA,CAACY,CDLG,GAAGX,KAAK,CAACC,CCKvB,CAAuB,KDLN,CAAcJ,MCK/B,EAAqCqB,EDLpB,IAA4BrB,QCK7C,EDLiB,GAAyC,CAACA,UAAD,CAAtD;ACMJkB,ADLIhB,IAAAA,IAAI,CAACG,CCKC,CAACS,KDLP,CAAa,KCKjB,CAAuB,IDLNR,GAAG,EAAI,ECKxB,EAAoCgB,SAApC;ADJM,UAAIzB,MAAM,CAACU,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCb,QAArC,EAA+CU,GAA/C,CAAJ,EAAyD;ACM/D,ADLQV,QAAAA,CCKCuB,ODLO,CAACb,GCKjB,ADLgB,CAAR,CAAcI,CCKC,GDLf,CAAmBT,OAAnB;ACMNsB,ADLK,ECKLA,KDPI,ECOG,CAACC,GAAR,ADLW,CCKC,SAAZ;AACD,ADLO5B,QAAAA,QAAQ,CAACU,GAAD,CAAR,GAAgB,CAACL,OAAD,CAAhB;AACD;ACMP,ADLK,KAND,ICWKmB,aAAT,GAAyB;AACvBG,ADLC,ECKDA,CDdA,MCcO,CAACC,GAAR,CAAY,YAAZ;AACD;ADJC,MAAMb,SAAS,GAAG,SAAZA,SAAY,CAAAC,GAAG,EAAI;ACM3B,ADLI,QAAIN,CCKCe,EDLE,GAAGT,GAAG,CAACN,GAAd,CADuB,CCM3B,ADJI,GCIsB;AACxBiB,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACD,ADLG,QAAI5B,QAAQ,CAACU,GAAD,CAAZ,EAAmB;AACjBV,MAAAA,QAAQ,CAACU,GAAD,CAAR,CAAcD,OAAd,CAAsB,UAAAJ,OAAO;ACMnC,ADNmC,SCM1BqB,MDN8BrB,GCMvC,GAAqB,CDNyB,CAACQ,IAAR,EAAJ;ACOjCc,ADPiC,ECOjCA,KDPI,ECOG,CAACC,GAAR,CAAY,UAAZ;AACD,ADPI;AACF,GAND;;AAQA9B,EAAAA,OAAO,CAACmB,gBAAR,CAAyB,SAAzB,EAAoCF,SAApC;AAEA,SAAO;AACLG,IAAAA,WAAW,EAAEf;AADR,GAAP;AAGD","file":"tetris.e31bb0bc.js","sourceRoot":"..","sourcesContent":["export default function KeyboardListener(context = document) {\r\n  const handlers = Object.create(null);\r\n\r\n  const subscribe = (triggerKey, handler) => {\r\n    const keys = Array.isArray(triggerKey) ? triggerKey : [triggerKey];\r\n    keys.forEach(key => {\r\n      if (Object.prototype.hasOwnProperty.call(handlers, key)) {\r\n        handlers[key].push(handler);\r\n      } else {\r\n        handlers[key] = [handler];\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleKey = evt => {\r\n    var key = evt.key;\r\n    //console.log(key);\r\n    if (handlers[key]) {\r\n      handlers[key].forEach(handler => handler.call());\r\n    }\r\n  };\r\n\r\n  context.addEventListener('keydown', handleKey);\r\n\r\n  return {\r\n    addListener: subscribe\r\n  };\r\n}\r\n","import KeyboardListener from './keyboardListener.js';\r\n\r\nconst dir = Object.create(null);\r\ndir.LEFT = -1;\r\ndir.RIGHT = 1;\r\n\r\nconst keyHandler = KeyboardListener();\r\nkeyHandler.addListener('ArrowUp', rotatePiece);\r\nkeyHandler.addListener('ArrowLeft', movePieceLeft);\r\nkeyHandler.addListener('ArrowRight', movePieceRight);\r\nkeyHandler.addListener('ArrowDown', dropPiece);\r\n\r\nfunction rotatePiece() {\r\n  console.log('ROTATE!');\r\n}\r\n\r\nfunction movePieceLeft() {\r\n  console.log('MOVE LEFT!');\r\n}\r\n\r\nfunction movePieceRight() {\r\n  console.log('MOVE RIGHT!');\r\n}\r\n\r\nfunction dropPiece() {\r\n  console.log('DROP IT!');\r\n}\r\n"]}